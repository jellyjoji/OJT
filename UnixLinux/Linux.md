# Linux
리누스 토발즈가 출시한 운영 체제 커널인 리눅스 커널에 기반을 둔 오픈 소스 유닉스 계열 운영 체제이다. 

## Linux 구성
리눅스는 크게 커널과 셸, 응용프로그램 3가지로 구성되어 있다. 

### 1. 커널(Kernel)
커널은 리눅스의 핵심으로 프로세스 관리, 메모리 관리, 파일 시스템 관리, 장치 관리등 컴퓨터의 모든 자원을 초기화하고 제어하는 기능을 수행한다.

### 2. 셸(Shell)
셸은 리눅스의 사용자 인터페이스로서 사용자와 커널 사이의 중간자 역할을 담당하는 특별한 프로그램이다. 셸은 사용자가 입력한 명령을 해석하여 커널에 넘겨준다. 그러면 커널이 명령을 수행한 후 수행 결과를 돌려주고, 셸은 다시 사용자가 이해 할 수 있는 형태로 바꿔서 출력한다. 리눅스는 배시 셸을 기본으로 사용한다.

### 3. 응용프로그램
리눅스는 각종 프로그래밍 개발 도구, 문서 편집도구, 네트워크 관련 도구등 매우 다양한 응용 프로그램을 제공한다.

[리눅스 명령어 모음](https://paulsotry.notion.site/Linux-Command-8c129951ed1c402896649728cf95d7fe)

## Linux 특징
### 다중 사용자 및 다중 처리 시스템	
- 멀티유저(Multi-User) : 하나의 시스템에 다수의 사용자들이 동시에 접속하여 사용 가능
- 멀티태스킹(Multitasking) : 각 접속자들은 다수의 작업을 중앙처리장치(CPU)와 같은 공용자원을 나누어 다수의 응용 프로그램을 실행 가능

### 완전히 공개된 시스템	
운영체제의 핵심인 커널(Kernel)뿐만 아니라, 운영체제 프로그램에 내장되어 배포되는 대부분의 모든 응용 프로그램들의 소스가 공개된 오픈소스 프로그램

### 뛰어난 네트워크 환경	
가장 널리 쓰이는 이더넷(Ethernet)을 포함하여 SLIP, PPP, ATM 등의 다양한 네트워크 환경을 지원하여 TCP/IP, IPX, AppleTalk 등 대부분의 네트워크 프로그램을 지원

### 뛰어난 이식성과 확장성	
리눅스는 약간의 어셈블리어와 대부분의 C언어로 작성되어 있어 이식성과 확장성이 높음. 다른 OS 환경에서도 쉽게 실행 가능

### 뛰어난 안전성과 보안성	
리눅스는 커널 소스가 공개되어 있어 Windows 운영체제와 같은 폐쇄형 운영체제에 비해 보안상의 보안 취약점이 쉽게 노출될 가능성이 있으나, 공개용 소프트웨어를 지지하는 수많은 전문 프로그래머들이 상용 운영체제보다 빠르게 오류 수정과 보안 관련된 패치에 대응하여 안정성을 확보한 버전을 발표

### 다양한 배포판의 존재. 가격이 저렴	
- 오픈소스 이기 때문에 윈도우에 비해 저렴
- 리눅스는 서버, 개발용, PC용 등 다양한 목적으로 사용 가능하고, 이에 따른 다양한 배포판이 존재. 레드햇, 데비안, 우분투, 수세 등

## Linux 파일 시스템
리눅스에서는 시스템에 설치된 여러가지 하드웨어적 자원 장치들을 모두 파일화하여 사용하기 때문에 특정 하드웨어에게 명령을 수행하려면 해당하는 장치 파일에 명령을 내리면 된다.
- 파일 저장의 기본적인 구조, 시스템 관리를 위한 기본 환경을 제공
- 저장장치 내에서 데이터를 쉽게 읽고 쓰기 위해 미리 정해진 약속
- 트리 구조 형태(디렉터리, 서브 디렉터리, 파일 등)
- Linux의 파일 관리 소프트웨어

```jsx
// 파일 시스템 확인
df -Th
```

### 파일 시스템
파일시스템은 운영체제가 저장되어있는 파일이나 폴더들을 효율적으로 관리 및 읽고 쓰는 행위를 하는 방법을 말한다.
파일 시스템은 파일에 이름을 붙이고 저장, 탐색을 위해 파일을 어디에 위치 시킬 것인지 나타내는 체계이다. 파일들이 디스크 상에서 구성되는 방식을 뜻하기도 한다.
리눅스는 윈도우와 달리 **Ext(Extended File System)**을 사용한다.

#### 파일 시스템 역할
데이터를 더 빠르게 읽고 쓸 수 있는 단위 블록을 소프트웨어적으로 계산
분산 저장된 연관된 데이터들을 빠르게 찾아준다.
디스크 조각 모음과 같이 디스크 공간을 효율적으로 사용하게 해준다.

#### 파일 시스템 유형
1. 루트 파일
- 디스크 상에 적어도 하나의 루트 파일 이 존재
- 시스템 프로그램과 디렉터리들이 포함
2. 일반 파일
- 컴퓨터가 수행 가능한 프로그램 파일이나 원시 프로그램 파일, 텍스트 파일, 데이터 파일 등이 존재
3. 디렉터리 파일
- 다른 파일과 디렉터리들에 관한 정보를 저장
- 파일명과 inode 번호를 연결하는 부분
- Inode란 리눅스나 유닉스 파일시스템에서 소유권, 데이터의 물리적 주소, 링크, 파일 타입, 크기, CMA(create, modify, access) 시간 등 파일의 모든 정보를 갖고 있는 구조체를 가리킨다.
4. 특수 파일
- 주변 장치에 연결된 파일로 하나 이상의 특수 파일을 가지고 있음

## 리눅스의 파이프(pipe) `|`
리눅스에서 파이프`|`란, 2개의 프로세스를 연결해주는 연결 통로를 의미한다.
여러 개를 사용하면 파이프라인(Pipe-Line)을 구성하게 되면서 데이터들은 **파이프라인을 따라 흐르게 된다.** 즉, 앞에 실행한 명령어의 출력 결과를 뒤에 실행하는 명령어의 입력 값으로 넣어준다는 말이다. 앞의 출력 결과를 뒤에 실행하는 명령어의 입력으로 보내줌으로 인해 파이프( | )를 사용하면 여러 명령을 동시에 연결해 사용할 수 있다.

### 리눅스의 파이프(pipe) 예시
```jsx
// ps : 현재 리눅스에서 실행되는 프로세스를 확인할 수 있는 명령어
//  grep : grep 명령어는 각 파일이나 텍스트에서 일정한 패턴(Pattern)을 검색할 때 사용하며 문자열, 정규 표현식 등의 패턴을 찾고자 할 때 리눅스에서 자주 쓰이는 커맨드

// ps -ef : 입력하면 현재 실행되고 있는 모든 프로세스에 세부 정보가 표시
ps -ef

// 많은 프로세스가 실행되고 있는 상태에서 원하는 키워드만 뽑아낸 프로세스들만 확인하고 싶다면, 이때 파이프 명령어`|`를 활용
ps -ef | grep httpd2

// "|" 기호를 통해 이전 명령어의 출력값이 다음 grep 명령의 입력으로 전달
// httpd 키워드가 포함된 프로세스들의 세부 목록만 출력되고 있음
```
## 리눅스 리다이렉션(Redirection)
쉘에서 명령의 결과를 바로 확인하지 않고 파일에 저장할 수 있다. 리다이렉션을 이용하여 출력과 입력의 방향을 지정해줄 수 있다. 리다이렉션을 이용하면 명령의 출력을 변경할 수 있다.
```jsx
기호	설명
<	// 표준 입력 재지정
>	// 표준 출력 재지정 (덮어쓰기)
>>	// 표준 출력 재지정 (이어쓰기)
2>	// 표준 에러 재지정 (덮어쓰기)
2>>	// 표준 에러 재지정 (이어쓰기)
>&	// 표준 출력&에러 재지정 (덮어쓰기)
>>&	// 표준 출력&에러 재지정 (이어쓰기)
```

## 리눅스 학습
### 숨김 파일 만들기
- 리눅스에서는 파일명의 맨 앞에 마침표(.)가 있으면 숨김파일이 됨
- mv 명령어를 통해 파일 명 앞을 마침표(.)로 바꿔줘도 됨
- 환경변수와 같은 파일들이 숨김파일
- 숨김 파일은 ls -a 명령어를 통해 조회 가능

```jsx
// 숨김 파일 생성
vi .a.txt
 
// 숨김 파일 조회 안됨
ls
arkforcdc  공개  다운로드  문서  바탕화면  비디오  사진  서식  음악
 
// 숨김 파일 조회 됨
ls -al
-rw-r--r--.  1 oracle oinstall     0  9월  7 13:53 .a.txt
```

### tar, gz, zip 압축 및 압축 풀기
#### 압축하기
```jsx
// 디렉터리를 tar파일로 압축
tar -cvf [파일 명.tar] [디렉터리 명]
 
// 디렉터리를 tar.gz파일로 압축
tar -zcvf [파일 명.tar.gz] [디렉터리 명]
 
// 디렉터리를 zip파일로 압축
zip [파일 명.zip] [디렉터리 명]
 
// 현재 폴더 전체를 zip파일로 압축
zip [파일 명.zip] ./*
 
// 현재 폴더의 모든 것과 현재 폴더의 하위 폴더들도 모두 zip파일로 압축
zip [파일 명.zip] -r ./*
```
~~~
`tar` : 리눅스 환경에서 자주 사용하는 방식. 매우 빠른 압축 가능
`tar.gz` : 리눅스 환경에서 용량을 줄여서 압축할때 사용하는 방식. tar를 다시 압축한다는 의미
`zip` : 윈도우 환경에서 일반적으로 사용되는 압축 확장자
~~~

#### 압축 풀기
```jsx
// tar파일 압축 풀기
tar -xvf [파일 명.tar]
 
// tar.gz파일 압축 풀기
tar -zxvf [파일 명.tar.gz]
 
// zip파일 압축 풀기
unzip [파일 명.zip]
```
~~~
`-c` : tar 파일로 압축
`-p` : 파일 권한을 저장
`-v` : 압축하거나 해제할 때의 과정을 화면으로 출력
`-f` : 파일 이름을 지정
`-C` : 경로를 지정
`-x` : tar 압축을 풂
`-z` : gzip으로 압축하거나 해제
~~~

# Linux 기본 명령어
```bash
ls	현재 위치의 파일 목록 조회
pwd	현재 디렉터리 경로 조회
cd	디렉터리 이동
touch	0바이트 파일 생성, 파일의 날짜와 시간을 수정
mkdir	디렉터리 생성
rmdir	디렉터리 삭제
cp	파일 복사
mv	파일 이동. 파일 명 변경
rename	파일 명 변경
rm	파일 삭제
cat	파일의 내용을 화면에 출력, 리다이렉션 기호('>')를 사용하여 새로운 파일 생성
alias	자주 사용하는 명령어들을 별명으로 정의하여 쉽게 사용할 수 있도록 설정
chmod	파일 사용 권한 변경
clear	터미널의 내용을 모두 지움
ps	실행 중인 프로세스 상태 조회. CPU 사용도 낮은 순서로 출력
pstree	실행 중인 프로세스들을 트리구조로 조회
kill	프로세스 실행 종료
grep	특정 파일에서 지정한 문자열을 포함한 행을 조회
```
## Linux 명령어 옵션과 설명

### ls(list Segments) : 현재 위치의 파일 목록 조회

```bash
ls -l (ll) : 파일의 상세정보. 리스트 형식
ls -a : 숨김 파일 표시
ls -al : 숨김 파일 표시. 리스트 형식
ls -t : 파일들을 생성시간순(제일 최신 것부터)으로 표시
ls -tl : 파일들을 생성시간순(제일 최신 것부터)으로 표시. 리스트 형식
ls -rt : 파일들을 생성시간순(제일 오래된 것부터)으로 표시
ls -rtl : 파일들을 생성시간순(제일 오래된 것부터)으로 표시. 리스트 형식
ls -f : 파일 표시 시 마지막 유형에 나타내는 파일명을 끝에 표시
ls -fl : 파일 표시 시 마지막 유형에 나타내는 파일명을 끝에 표시. 리스트 형식
```

### cd(Change Directory) : 디렉터리 이동

```bash
cd[디렉터리 경로] : 이동하려는 디렉터리로 이동 (경로 입력 시 '[',']' 부분은 빼고 입력)
cd ~ , cd '띄워 쓰기', cd $HOME : 홈 디렉터리로 이동
cd $변수명 : 변수명에 저장된 경로로 이동
cd - : 이전 작업 디렉터리로 이동
cd / : 최상위 디렉터리로 이동
cd . : 현재 디렉터리로 이동
cd .. : 이전 경로로 이동
```

### touch : 0바이트 파일 생성, 파일의 날짜와 시간을 수정

```bash
touch filename : 0 바이트의 filename의 파일을 생성
touch -c filename : filename의 시간을 현재시간으로 갱신
touch -t 202110291608 filename : filename의 시간을 날짜 정보(YYYYMMDDhhmm)로 갱신 (202110291608 => 2021.10.29.16:08)
touch -r oldfile newfile : newfile의 날짜 정보를 oldfile의 날짜 정보와 동일하게 변경
```

### mkdir(Make Directory) : 디렉터리 생성

```bash
mkdir dirname : dirname이라는 디렉터리 생성
mkdir dir1 dir2 : 한 번에 여러 개의 디렉터리 생성
mkdir -p dirname/sub_dirname : dirname이라는 디렉터리 생성, sub_dirname이라는 하위 디렉터리도 생성
mkdir -m 700 dirname : 특정 퍼미션(권한)을 갖는 디렉터리 생성
```

### rmdir(Remove Directory) : 디렉터리 삭제

```bash
rmdir dirname : dirname이라는 디렉터리 삭제
```

### cp(Copy) : 파일 복사

```bash
cp file1 file2 : file1을 file2라는 이름으로 복사
cp -f file1 file2 : 강제 복사(이미 file2가 존재할 경우 기존 file2를 지우고 복사 진행)
cp -r dir1 dir2 : 디렉터리 복사. 폴더 안의 모든 하위 경로와 파일들을 복사
```

### mv(Move) : 파일 이동, 파일 명 변경

```bash
mv file1 file2 : file1 파일 명을 file2 로 변경
mv file1 /dir : file1 파일을 dir 디렉터리로 이동
mv file1 file2 /dir : 여러 개의 파일을 dir 디렉터리로 이동
mv /dir /dir2 : dir1 디렉터리 명을 dir2로 변경
```

### rename(RE Name) : 파일 명 변경

```bash
ename file1(변경 전) file2(변경 후) file?(대상 파일) : file? 형식으로 된 대상 파일을 file1에서 file2로 변경 
```

### rm(Remove) : 파일 삭제

```bash
rm file1 : file1을 삭제
rm -f file1 : file1을 강제 삭제
rm -r dir : dir 디렉터리 삭제(디렉터리는 -r 옵션 없이 삭제 불가)
```

### cat(catenate) : 파일의 내용을 화면에 출력, 리다이렉션 기호('>')를 사용하여 새로운 파일 생성.
파일이름을 인자로 받아서 그 내용을 쭉 이어주는 역할을 한다. 결국 어떤 내용을 받아서 그냥 그대로 터미널 화면에 뿌려주는 역할을 한다.
(concatenate : 사슬같이 잇다. 문자열의 끝과 끝을 결합시키는 조작이다.)
```bash
cat file1 : file1의 내용을 출력
cat file1 file2 : file1과 file2의 내용을 출력
cat file1 file2 | more : file1과 file2의 내용을 페이지별로 출력
cat file1 file2 | head : file1과 file2의 내용을 처음부터 10번째 줄까지만 출력
cat file1 file2 | tail : file1과 file2의 내용을 끝에서부터 10번째 줄까지만 출력
```

### alias : 자주 사용하는 명령어들을 별명으로 정의하여 쉽게 사용할 수 있도록 설정

```bash
alias 별명 = '명령어 정의' ex) alias lsa='ls-a' : lsa를 실행하면 -a옵션을 갖는 ls를 실행합니다. 띄워쓰기 중요
unalias 별명 : alias를 해제
```

### ps(Process) : 프로세스 상태 조회
```bash
ps -a : 실행중인 모든 프로세스 조회
ps -e : 모든 프로세스 조회
ps -u : 사용자 이름과 프로세스 시작 시간 조회
ps -x : 사용되고 있는 모든 프로세스 조회
pls -l : 자세한 정보 출력
```

### pstree(Process Tree) : 프로세스 트리 구조로 조회
```bash
pstree -p : 트리 구조 프로세스 ID 조회
pstree -n : 트리 구조 프로세스 ID를 정렬해서 조회
pstree -a : 명령행 인자를 포함한 정보를 트리 구조로 조회
pstree -h : 현재 프로세스와 해당 프로세스의 부모 프로세스를 음영으로 강조해서 조회
```

### kill(KILL Process) : 프로세스 종료
```bash
kill -l : 시그널 종류 나열
kill -s 시그널번호 -s 시그널명 : 전달할 시그널 종류를 지정
kill -1 : 프로세스 재시작
kill -9 : 프로세스 강제 종료
```

### Grep : 특정한 문자열이 포함된 행을 조회
```bash
grep [옵션] [패턴] [파일명]

// grep '문자열' 파일명
grep 'a*' 파일명 : 특정 파일에서 'a'로 시작하는 모든 단어 찾기

grep 'a' * : 모든 파일에서 a 로 시작하는 모든 단어 찾기
```

## 권한
### chmod(Change Mode) : 파일 사용 **권한** 변경

```bash
chmod [변경하고자 하는 권한 값] [파일 혹은 디렉토리]

chmod [옵션] [사용자][설정기호][권한] [파일 혹은 디렉토리]
```

**파일 타입(file type)**과 **권한 정보(permission)**를 나타내며 총 10자리로 이루어져 있다.

```jsx
// 파일 타입(file type) : 먼저 맨 앞의 문자 1자리 d
// 권한(permission) : 2-10 번째 코드 rwxr-xr-x
drwxr-xr-x
```
#### 파일 타입(file type) : 먼저 맨 앞의 문자 1자리 `d`
~~~
`-`  :  일반 파일이라는 표시이다. (regular file)
`d`  :  폴더 / 디렉터리라는 표시이다. (directory)
`l`  :  심볼릭 링크라는 표시이다. (symbolic link)
~~~

#### 권한(permission) : 2-10 번째 코드 `rwxr-xr-x`
~~~
이 중 맨 앞의 3자리 `rwx` : 파일 소유자에 대한 권한이다.
중간의 3자리 `r-x` :  파일 소유자의 그룹에 대한 권한이다.
마지막의 3자리 `r-x` : 시스템의 다른 사용자에 대한 권한(소유자 외 유저들의 권한)이다.
~~~
 
#### 여기서 r, w, x
~~~
`r`  :  읽기(read)로 파일을 읽을 수 있는 권한이다.
`w`  : 쓰기(write)로 파일을 쓰거나, 수정하거나, 지울 수 있는 권한이다.
`x`  : 실행(execute)으로 파일을 실행할 수 있는 권한이다.
~~~
#### 위의 3자리의 권한을 정리했을 때
~~~
`---` 권한 없음
`--x` 실행 전용 권한
`-w-` 쓰기 전용 권한
`-wx` 쓰기 및 실행 권한
`r--` 읽기 권한
`r-x` 읽기 및 실행 권한
`rw-` 읽기 및 쓰기 권한
`rwx` 읽기, 쓰기 및 실행 권한
~~~

### `chmod` 명령어의 사용법
#### 기호를 통해 권한을 변경하는 방법
~~~
`+` :  권한 추가
`-` : 권한 제거
`=` :  권한 부여

`u` : user의 약자, 소유자
`g` : group의 약자, 소유 그룹
`o` : other의 약자, 일반 사용자
`a` :  all의 약자, 모든 사용자
~~~

```jsx
chmod a+x test.txt
// 모든 사용자(a = all)에게 실행 권한(x)를 추가(+)한다.

chmod g-w test.txt
// 소유 그룹(g = group)에게 쓰기 권한(w)를 제거(-)한다.

chmod u=rw test.txt
// 소유자(u = user)에게 읽기(r), 쓰기(w) 권한을 부여한다.

chmod u-x,g+w,o+w test.txt
// 소유자에게 실행 권한을 제거하고, 그룹에게 쓰기 권한을 추가하고, 나머지 사용자에게 쓰기 권한을 부여한다.
// 콤마( , )를 통해 단일 대상이 아닌 여러 대상에게도 권한을 적용할 수 있다.
// (만약 문자가 없으면 'a'와 동일하게 적용된다.)
```

#### 숫자를 통해 권한을 변경하는 방법

r, w, x는 각 권한마다 부여된 고유의 숫자가 존재한다.
~~~
`r` = 4,
`w` = 2,
`x` = 1
(r + w = 6,  r + x = 5,  w + x = 3)
`777` = 모든 권한
~~~

```jsx
chmod 777 test.txt
// user, group, other에 대한 **모든 권한**을 추가한다.

chmod 743 test.txt
// user에게는 모든 권한이 허용되고, group에게는 읽기 권한(r=4), other에게는 실행 권한(x=3)과 쓰기 권한(w=2)를 준다.

chmod -R 700 project
// -R 옵션을 사용하면 하위 디렉토리와 그 안의 파일 권한까지 모두 변경할 수 있다.
// project 디렉토리 하위에 위치
// '-R' 옵션을 사용하면 하위 디렉터리와 그 안의 파일 권한까지 모두 변경할 수 있다.
```

#### 파일 소유자 변경하기

```bash
chown [변경할 소유자] [변경할 파일]
```